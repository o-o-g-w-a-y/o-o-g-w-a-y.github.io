<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DSET | Cyber Security Quizzes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@500;700&family=Fira+Code&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    :root {
      --neon-blue: #00f2ff;
      --neon-purple: #a100ff;
      --neon-pink: #ff00e6;
      --neon-green: #00ff88;
      --dark-bg: #0a0e1a;
      --darker-bg: #050811;
      --glow-intensity: 0 0 15px;
      --terminal-cursor: #00ff41;
    }

    /* ===== CYBER LOADING SCREEN ===== */
    #cyber-loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--darker-bg);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    
    .loading-text {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.5rem;
      font-weight: 900;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(161, 0, 255, 0.5);
      letter-spacing: 5px;
      margin-bottom: 2rem;
      position: relative;
    }
    
    .loading-text::after {
      content: '_';
      position: absolute;
      right: -20px;
      animation: blink 1s step-end infinite;
      color: var(--terminal-cursor);
    }
    
    .loading-bar-container {
      width: 400px;
      height: 8px;
      background: rgba(0, 242, 255, 0.1);
      border: 1px solid rgba(0, 242, 255, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .loading-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      box-shadow: 0 0 15px rgba(0, 242, 255, 0.7);
      transition: width 0.1s ease-out;
    }
    
    .loading-bar::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      width: 20px;
      background: rgba(255, 255, 255, 0.8);
      animation: scan 1.5s infinite;
    }

    /* ===== MAIN CONTENT (HIDDEN INITIALLY) ===== */
    .main-content {
      display: none;
    }
    
    body {
      font-family: 'Rajdhani', sans-serif;
      background: var(--dark-bg);
      min-height: 100vh;
      overflow-x: hidden;
      color: #ffffff;
      position: relative;
      margin: 0;
      padding: 0;
    }

    /* ===== CYBERPUNK NAVBAR ===== */
    .navbar-custom {
      background: rgba(10, 14, 26, 0.95) !important;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(0, 242, 255, 0.3);
      box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);
      padding: 0.8rem 2rem;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
    }

    .navbar-brand {
      font-family: 'Orbitron', sans-serif !important;
      font-size: 2.4rem !important;
      font-weight: 900 !important;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: var(--glow-intensity) rgba(161, 0, 255, 0.7);
      letter-spacing: 3px;
      position: relative;
      padding-right: 20px;
      margin-right: 1rem;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    .navbar-brand:hover {
      text-shadow: 0 0 25px var(--neon-purple), 
                   0 0 20px var(--neon-blue),
                   0 0 35px rgba(161, 0, 255, 0.5);
      transform: scale(1.05) !important;
    }

    .navbar-brand::after {
      content: '_';
      position: absolute;
      right: 0;
      animation: blink 1s step-end infinite;
      color: var(--terminal-cursor);
      font-weight: 400;
    }

    .nav-link {
      font-family: 'Rajdhani', sans-serif;
      font-weight: 700 !important;
      font-size: 1.15rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: white !important;
      margin: 0 12px;
      position: relative;
      padding: 8px 0 !important;
      transition: all 0.3s ease;
      text-shadow: 0 0 8px rgba(0, 242, 255, 0.3);
    }

    .nav-link::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      transition: width 0.4s ease, box-shadow 0.4s ease;
    }

    .nav-link:hover {
      color: var(--neon-blue) !important;
      text-shadow: 0 0 15px rgba(0, 242, 255, 0.7);
    }

    .nav-link:hover::before {
      width: 100%;
      box-shadow: 0 0 15px var(--neon-blue);
    }

    .nav-link.active {
      color: var(--neon-green) !important;
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
    }

    .nav-link.active::before {
      width: 100%;
      background: var(--neon-green);
      box-shadow: 0 0 20px var(--neon-green);
    }

    .navbar-toggler {
      border: 1px solid var(--neon-blue);
      padding: 0.5rem;
    }

    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(0, 242, 255, 0.8)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }

    /* ===== QUIZ SELECTION PAGE STYLES ===== */
    .quiz-container {
      padding-top: 120px;
      padding-bottom: 50px;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 10;
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 60px;
      position: relative;
      background: rgba(5, 8, 17, 0.7);
      padding: 2rem;
      border-radius: 8px;
      border: 1px solid rgba(0, 242, 255, 0.2);
      box-shadow: 0 0 30px rgba(0, 242, 255, 0.1);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .quiz-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.5rem;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(161, 0, 255, 0.5);
      letter-spacing: 2px;
    }

    .quiz-header p {
      font-family: 'Fira Code', monospace;
      font-size: 1.2rem;
      color: #b2f5ea;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .quiz-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 30px;
      margin-top: 50px;
    }

    .quiz-card {
      background: rgba(5, 8, 17, 0.6);
      border: 1px solid rgba(0, 242, 255, 0.2);
      border-radius: 8px;
      padding: 30px;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 20px rgba(0, 242, 255, 0.1);
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .quiz-card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-pink));
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .quiz-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 0 40px rgba(0, 242, 255, 0.3);
      border-color: transparent;
    }

    .quiz-card:hover::before {
      opacity: 0.7;
    }

    .quiz-card h2 {
      font-family: 'Orbitron', sans-serif;
      color: var(--neon-blue);
      margin-bottom: 15px;
      font-size: 1.8rem;
      position: relative;
      display: inline-block;
    }

    .quiz-card h2::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 50px;
      height: 2px;
      background: var(--neon-blue);
      transition: width 0.3s ease;
    }

    .quiz-card:hover h2::after {
      width: 100%;
      background: var(--neon-green);
    }

    .quiz-card p {
      font-family: 'Rajdhani', sans-serif;
      color: #b2f5ea;
      line-height: 1.6;
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .quiz-meta {
      display: flex;
      justify-content: space-between;
      font-family: 'Fira Code', monospace;
      font-size: 0.9rem;
      color: var(--neon-green);
      margin-bottom: 20px;
    }

    .quiz-difficulty {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 4px;
      font-weight: bold;
    }

    .difficulty-beginner {
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid var(--neon-green);
    }

    .difficulty-intermediate {
      background: rgba(0, 242, 255, 0.1);
      border: 1px solid var(--neon-blue);
    }

    .difficulty-advanced {
      background: rgba(161, 0, 255, 0.1);
      border: 1px solid var(--neon-purple);
    }

    .difficulty-expert {
  background: rgba(255, 0, 230, 0.1);
  border: 1px solid var(--neon-pink); 
}

    .btn-quiz {
      display: inline-block;
      padding: 0.8rem 1.8rem;
      font-size: 1.1rem;
      font-weight: 700;
      font-family: 'Rajdhani', sans-serif;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      background: transparent;
      color: var(--neon-blue);
      border: 2px solid var(--neon-blue);
      border-radius: 0;
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
      box-shadow: 0 0 15px rgba(0, 242, 255, 0.4),
                  inset 0 0 10px rgba(0, 242, 255, 0.2);
      text-decoration: none;
      text-align: center;
      margin-top: auto;
    }

    .btn-quiz:hover {
      color: var(--neon-green);
      border-color: var(--neon-green);
      text-shadow: 0 0 10px var(--neon-green);
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.6),
                  inset 0 0 15px rgba(0, 255, 136, 0.3);
      transform: translateY(-3px);
    }

    .btn-quiz::before {
      content: '>';
      margin-right: 8px;
      color: var(--neon-green);
    }

    /* ===== MATRIX BACKGROUND ===== */
    .matrix-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
      opacity: 0.7;
    }
    /* ===== QUIZ PROGRESSION SYSTEM STYLES ===== */
/* Add these to your existing stylesheet */

/* Locked Quiz Card Styles */
.quiz-card.locked {
  position: relative;
  opacity: 0.7;
  filter: grayscale(60%);
  pointer-events: auto;
  box-shadow: none;
  border-color: rgba(255, 0, 230, 0.3) !important;
}

.quiz-card.locked::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(5, 8, 17, 0.8);
  z-index: 1;
  border-radius: 8px;
}

/* Disable hover animations when locked */
.quiz-card.locked:hover { transform: none; box-shadow: none; }
.quiz-card.locked:hover::before { opacity: 0; }

.lock-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  color: var(--neon-pink);
  text-shadow: 0 0 15px var(--neon-pink);
  z-index: 2;
}

/* Completion Badge */
.completed-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: rgba(0, 255, 136, 0.2);
  color: var(--neon-green);
  padding: 3px 10px;
  border-radius: 4px;
  font-family: 'Fira Code', monospace;
  font-size: 0.8rem;
  border: 1px solid var(--neon-green);
  z-index: 2;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Progress Indicator */
.progress-indicator {
position: fixed;
bottom: 850px;
right: 20px;
background: rgba(5, 8, 17, 0.9);
  border: 1px solid var(--neon-blue);
  padding: 15px;
  border-radius: 8px;
  font-family: 'Fira Code', monospace;
  box-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
  z-index: 200;
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
}

.progress-indicator h3 {
  color: var(--neon-blue);
  margin-bottom: 10px;
  font-family: 'Rajdhani', sans-serif;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: 1.1rem;
}

.progress-bar {
  height: 6px;
  background: rgba(0, 242, 255, 0.2);
  border-radius: 3px;
  margin-top: 10px;
  overflow: hidden;
  border: 1px solid rgba(0, 242, 255, 0.3);
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
  width: 0%;
  transition: width 0.5s ease;
  box-shadow: 0 0 10px rgba(0, 242, 255, 0.7);
}

/* Unlock Animation */
@keyframes unlock {
  0% { 
    transform: scale(1); 
    opacity: 0.7; 
    filter: grayscale(60%);
  }
  50% { 
    transform: scale(1.05); 
    opacity: 1; 
    box-shadow: 0 0 30px var(--neon-green);
    filter: grayscale(0%);
  }
  100% { 
    transform: scale(1); 
    opacity: 1; 
    filter: grayscale(0%);
  }
}

.unlocking {
  animation: unlock 1s ease forwards;
  pointer-events: auto !important;
}

/* Quiz Status Indicators */
.quiz-status {
  position: absolute;
  top: 15px;
  left: 15px;
  font-family: 'Fira Code', monospace;
  font-size: 0.8rem;
  z-index: 2;
}

.status-locked {
  color: var(--neon-pink);
}

.status-unlocked {
  color: var(--neon-green);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .progress-indicator {
    bottom: 400px;
    right: 10px;
    padding: 10px;
    font-size: 0.9rem;
  }
  
  .progress-indicator h3 {
    font-size: 1rem;
  }
  
  .lock-icon {
    font-size: 2rem;
  }
  
  .completed-badge {
    font-size: 0.7rem;
    padding: 2px 8px;
  }
}

    /* ===== ANIMATIONS ===== */
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    
    @keyframes scan {
      0% { right: 100%; }
      100% { right: -20px; }
    }

    /* ===== RESPONSIVE ADJUSTMENTS ===== */
    @media (max-width: 992px) {
      .quiz-header h1 {
        font-size: 2.8rem;
      }
      
      .quiz-container {
        padding: 100px 20px 40px;
      }
      
      .quiz-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }
      
      .loading-text {
        font-size: 2.5rem;
      }
      
      .loading-bar-container {
        width: 300px;
      }
    }

    @media (max-width: 768px) {
      .quiz-header h1 {
        font-size: 2.2rem;
      }
      
      .quiz-header p {
        font-size: 1rem;
      }
      
      .quiz-card h2 {
        font-size: 1.5rem;
      }
      
      .btn-quiz {
        padding: 0.7rem 1.5rem;
        font-size: 1rem;
      }
      
      .loading-text {
        font-size: 2rem;
        letter-spacing: 3px;
      }
      
      .loading-bar-container {
        width: 250px;
        height: 6px;
      }
    }

    @media (max-width: 480px) {
      .quiz-grid {
        grid-template-columns: 1fr;
      }
    }
    @media (max-width: 576px) {
      .quiz-header {
        padding: 1rem;
      }
      .quiz-header h1 {
        font-size: 1.3rem;
      }
      .quiz-header p {
        font-size: 0.95rem;
      }
      .quiz-card {
        padding: 10px;
        font-size: 0.95rem;
      }
      .quiz-card h2 {
        font-size: 1.1rem;
      }
      .btn-quiz {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
      .navbar-custom {
        padding: 0.5rem 0.5rem;
      }
      .navbar-brand {
        font-size: 1.1rem !important;
        padding-right: 8px;
        margin-right: 0.5rem;
      }
      .nav-link {
        font-size: 0.95rem;
        margin: 0 4px;
        padding: 6px 0 !important;
      }
      .progress-indicator {
        bottom: 320px;
        right: 5px;
        padding: 6px;
        font-size: 0.7rem;
      }
      .progress-indicator h3 {
        font-size: 0.9rem;
      }
    }
    @media (max-width: 400px) {
      .quiz-header {
        padding: 0.5rem;
      }
      .quiz-header h1 {
        font-size: 0.9rem;
      }
      .quiz-card {
        padding: 4px;
        font-size: 0.8rem;
      }
      .quiz-card h2 {
        font-size: 0.8rem;
      }
      .btn-quiz {
        padding: 0.3rem 0.5rem;
        font-size: 0.7rem;
      }
      .navbar-brand {
        font-size: 0.7rem !important;
      }
      .nav-link {
        font-size: 0.7rem;
      }
      .progress-indicator {
        bottom: 260px;
        right: 2px;
        padding: 2px;
        font-size: 0.5rem;
      }
      .progress-indicator h3 {
        font-size: 0.6rem;
      }
    }
  /* ===== GUIDE BOT STYLES (from course) ===== */
  #cyber-guide {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 1002;
  transform: translateY(100px);
  opacity: 0;
  transition: all 0.5s ease-out;
}

#cyber-guide.active {
  transform: translateY(0);
  opacity: 1;
}

.guide-character { width: 120px; height: 160px; position: relative; cursor: pointer; }
.guide-body { width: 100%; height: 100%; background: linear-gradient(145deg, #0a2e38, #051a22); border: 2px solid #00f2ff; border-radius: 60% 60% 20% 20%; box-shadow: 0 0 25px rgba(0, 242, 255, 0.3), inset 0 0 15px rgba(0, 242, 255, 0.2); position: relative; overflow: hidden; }
.guide-face { position: absolute; top: 30%; left: 50%; transform: translateX(-50%); width: 70%; }
.guide-eyes { display: flex; justify-content: space-between; margin-bottom: 10px; }
.guide-eye { width: 20px; height: 30px; background: #00ff88; border-radius: 50%; box-shadow: 0 0 10px #00ff88, 0 0 20px #00ff88; animation: eye-blink 4s infinite; }
.guide-mouth { width: 40px; height: 10px; margin: 0 auto; background: #ff00e6; border-radius: 0 0 20px 20px; box-shadow: 0 0 8px #ff00e6; transition: all 0.3s; }
.guide-character:hover .guide-mouth { height: 15px; border-radius: 10px; }
.guide-panel { position: absolute; bottom: 15%; left: 50%; transform: translateX(-50%); width: 80%; height: 20px; background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; border-radius: 5px; overflow: hidden; }
.guide-panel::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 242, 255, 0.3), transparent); animation: panel-scan 3s linear infinite; }
.speech-bubble { position: absolute; bottom: 180px; right: 0; width: 250px; padding: 15px; background: rgba(5, 8, 17, 0.9); border: 1px solid #00f2ff; border-radius: 10px; box-shadow: 0 0 20px rgba(0, 242, 255, 0.3); font-family: 'Fira Code', monospace; font-size: 0.9rem; color: #b2f5ea; opacity: 0; transform: scale(0.5); transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55); pointer-events: none; }
.speech-bubble::after { content: ''; position: absolute; bottom: -10px; right: 30px; border-width: 10px 10px 0; border-style: solid; border-color: #00f2ff transparent transparent; filter: drop-shadow(0 5px 5px rgba(0, 242, 255, 0.3)); }
.speech-bubble.active { opacity: 1; transform: scale(1); pointer-events: auto; }
.guide-controls { display: flex; justify-content: flex-end; margin-top: 10px; }
.guide-btn { background: rgba(0, 242, 255, 0.2); border: 1px solid #00f2ff; color: #00f2ff; padding: 5px 10px; font-family: 'Fira Code', monospace; font-size: 0.8rem; cursor: pointer; transition: all 0.3s; margin-left: 5px; }
.guide-btn:hover { background: rgba(0, 242, 255, 0.4); box-shadow: 0 0 10px rgba(0, 242, 255, 0.3); }
.faq-container { position: fixed; bottom: 220px; right: 30px; width: 250px; background: rgba(5, 8, 17, 0.9); border: 1px solid #00f2ff; border-radius: 10px; box-shadow: 0 0 20px rgba(0, 242, 255, 0.3); padding: 15px; font-family: 'Fira Code', monospace; font-size: 0.8rem; color: #b2f5ea; z-index: 101; display: none; }
.faq-container.active { display: block; }
.faq-item { margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed rgba(0, 242, 255, 0.3); cursor: pointer; }
.faq-item:hover { color: #00ff88; }
.input-container { position: fixed; bottom: 180px; right: 30px; width: 250px; display: none; z-index: 102; }
.input-container.active { display: block; }
#user-input { width: 100%; background: rgba(5, 8, 17, 0.9); border: 1px solid #00f2ff; border-radius: 5px; padding: 8px; font-family: 'Fira Code', monospace; color: white; outline: none; }
#user-input::placeholder { color: rgba(178, 245, 234, 0.5); }

  /* ===== LOGIN SYSTEM STYLES ===== */
    .cyber-popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 8, 17, 0.95);
      z-index: 2000;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .cyber-popup-content {
      background: var(--darker-bg);
      border: 1px solid var(--neon-blue);
      box-shadow: 0 0 50px rgba(0, 242, 255, 0.4),
                  inset 0 0 20px rgba(0, 242, 255, 0.1);
      width: 420px;
      padding: 2.5rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      border-radius: 12px;
      overflow: hidden;
    }

    .cyber-popup-content::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(0, 242, 255, 0.1), transparent);
      transform: rotate(45deg);
      animation: panel-scan 6s linear infinite;
      pointer-events: none;
    }

    .cyber-popup h2 {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 2rem;
      font-size: 1.8rem;
      letter-spacing: 2px;
      text-shadow: 0 0 15px var(--neon-green);
      position: relative;
    }

    .cyber-popup input {
      width: 100%;
      padding: 14px 16px;
      margin-bottom: 1.2rem;
      background: rgba(0, 242, 255, 0.08);
      border: 1px solid var(--neon-blue);
      color: white;
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      border-radius: 6px;
      transition: all 0.3s;
      position: relative;
      z-index: 1;
    }

    .cyber-popup input:focus {
      border-color: var(--neon-green);
      box-shadow: 0 0 15px var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
      outline: none;
    }

    .cyber-popup input::placeholder {
      color: rgba(178, 245, 234, 0.6);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      color: var(--neon-pink);
      font-size: 1.8rem;
      cursor: pointer;
      transition: all 0.3s;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-btn:hover {
      transform: rotate(90deg);
      text-shadow: 0 0 15px var(--neon-pink);
      background: rgba(255, 0, 230, 0.1);
    }

    .user-display {
      display: flex;
      align-items: center;
      margin-left: 20px;
      position: relative;
      padding: 8px 15px;
      border-radius: 30px;
      background: rgba(0, 242, 255, 0.1);
      border: 1px solid var(--neon-blue);
      box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
      transition: all 0.3s;
    }

    .user-display:hover {
      background: rgba(0, 242, 255, 0.2);
      box-shadow: 0 0 25px rgba(0, 242, 255, 0.4);
    }

    .username-display {
      color: var(--neon-green);
      font-family: 'Fira Code', monospace;
      margin-right: 15px;
      text-shadow: 0 0 8px var(--neon-green);
      font-size: 0.95rem;
      letter-spacing: 1px;
      position: relative;
      padding-right: 15px;
    }

    .username-display::after {
      content: '|';
      position: absolute;
      right: 0;
      color: var(--neon-blue);
      animation: blink 1s step-end infinite;
    }

    .btn-logout {
      background: transparent;
      border: none;
      color: var(--neon-pink);
      padding: 5px 10px;
      font-family: 'Fira Code', monospace;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 4px;
      display: flex;
      align-items: center;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn-logout:hover {
      color: white;
      background: rgba(255, 0, 230, 0.2);
      box-shadow: 0 0 15px var(--neon-pink);
    }

    .btn-logout::before {
      content: '⌫';
      margin-right: 5px;
      font-size: 1.1rem;
    }

    .cyber-alert {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3000;
      background: var(--darker-bg);
      border: 1px solid var(--neon-blue);
      box-shadow: 0 0 40px rgba(0, 242, 255, 0.4),
                  inset 0 0 20px rgba(0, 242, 255, 0.1);
      width: 350px;
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      display: none;
      backdrop-filter: blur(5px);
    }

    .cyber-alert.active { display: block; animation: alertFadeIn 0.4s ease-out; }

    .alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 8, 17, 0.8);
      z-index: 2999;
      display: none;
    }

    .alert-overlay.active { display: block; }

    .cyber-alert h3 {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      text-shadow: 0 0 10px var(--neon-green);
    }

    .cyber-alert p {
      color: #b2f5ea;
      font-family: 'Fira Code', monospace;
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .cyber-alert-btn {
      background: transparent;
      border: 1px solid var(--neon-blue);
      color: var(--neon-blue);
      padding: 0.7rem 1.8rem;
      font-family: 'Rajdhani', sans-serif;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 4px;
      margin: 0 10px;
    }

    .cyber-alert-btn.confirm { border-color: var(--neon-green); color: var(--neon-green); }
    .cyber-alert-btn.danger { border-color: var(--neon-pink); color: var(--neon-pink); }

    #login-btn {
      background: rgba(0, 242, 255, 0.15);
      border: 1px solid var(--neon-blue);
      border-radius: 4px;
      padding: 8px 20px !important;
      margin-left: 15px;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(0, 242, 255, 0.3);
      position: relative;
      overflow: hidden;
    }

    #login-btn:hover {
      background: rgba(0, 242, 255, 0.3);
      box-shadow: 0 0 20px var(--neon-blue);
      transform: translateY(-2px);
    }

    .nav-item.locked .nav-link {
      color: rgba(255, 255, 255, 0.3) !important;
      cursor: not-allowed;
    }

    .nav-item.locked .nav-link:hover::before { width: 0; }

    .btn-cyber {
      padding: 0.9rem 2rem;
      font-size: 1.1rem;
      font-weight: 700;
      font-family: 'Rajdhani', sans-serif;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      background: transparent;
      color: var(--neon-blue);
      border: 2px solid var(--neon-blue);
      border-radius: 0;
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
      box-shadow: 0 0 15px rgba(0, 242, 255, 0.4), inset 0 0 10px rgba(0, 242, 255, 0.2);
    }

    .btn-cyber:hover {
      color: var(--neon-green);
      border-color: var(--neon-green);
      text-shadow: 0 0 10px var(--neon-green);
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.6), inset 0 0 15px rgba(0, 255, 136, 0.3);
      transform: translateY(-3px);
    }

    @keyframes alertFadeIn {
      from { opacity: 0; transform: translate(-50%, -60%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }
  /* ===== FOOTER ===== */
  .cyber-footer {
    background: rgba(5, 8, 17, 0.95);
    border-top: 1px solid rgba(0, 242, 255, 0.3);
    padding: 60px 0 30px;
    position: relative;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease-out;
    z-index: 300; /* ensure above any fixed overlays */
    pointer-events: auto; /* guarantee clickable */
  }
  .cyber-footer.ready {
    visibility: visible;
    opacity: 1;
  }

  .cyber-footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, rgba(0, 242, 255, 0.05) 0%, transparent 70%);
    pointer-events: none;
  }

  .footer-logo {
    font-family: 'Orbitron', sans-serif !important;
    font-size: 2.4rem !important;
    font-weight: 900 !important;
    background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: var(--glow-intensity) rgba(161, 0, 255, 0.7);
    letter-spacing: 3px;
    margin-bottom: 20px;
    display: inline-block;
  }

  .footer-about p {
    color: #b2f5ea;
    font-family: 'Rajdhani', sans-serif;
    line-height: 1.7;
    margin-bottom: 20px;
  }

  .footer-links h3 {
    font-family: 'Orbitron', sans-serif;
    color: var(--neon-green);
    margin-bottom: 20px;
    font-size: 1.5rem;
  }

  .footer-links ul { list-style: none; padding: 0; }
  .footer-links li { margin-bottom: 10px; }

  .footer-links a {
    color: #b2f5ea;
    font-family: 'Rajdhani', sans-serif;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
    padding-left: 15px;
  }

  .footer-links a::before {
    content: '>';
    position: absolute;
    left: 0;
    color: var(--neon-blue);
    opacity: 0;
    transition: all 0.3s ease;
  }

  .footer-links a:hover {
    color: var(--neon-blue);
    padding-left: 20px;
    text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
  }

  .footer-links a:hover::before { opacity: 1; left: 0; }

  .footer-social h3 {
    font-family: 'Orbitron', sans-serif;
    color: var(--neon-green);
    margin-bottom: 20px;
    font-size: 1.5rem;
  }

  .social-icons { display: flex; gap: 15px; }

  .social-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 242, 255, 0.1);
    border: 1px solid rgba(0, 242, 255, 0.3);
    color: white;
    font-size: 1.5rem;
    transition: all 0.3s ease;
  }

  .social-icon:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 242, 255, 0.3); }

  .social-icon.discord { background: rgba(88, 101, 242, 0.1); border-color: rgba(88, 101, 242, 0.3); }
  .social-icon.discord:hover { background: #5865F2; box-shadow: 0 10px 20px rgba(88, 101, 242, 0.4); }

  .social-icon.facebook { background: rgba(24, 119, 242, 0.1); border-color: rgba(24, 119, 242, 0.3); }
  .social-icon.facebook:hover { background: #1877F2; box-shadow: 0 10px 20px rgba(24, 119, 242, 0.4); }

  .copyright {
    margin-top: 50px;
    padding-top: 20px;
    border-top: 1px solid rgba(0, 242, 255, 0.2);
    text-align: center;
    color: #b2f5ea;
    font-family: 'Rajdhani', sans-serif;
  }

  .copyright a { color: white !important; text-decoration: none; transition: all 0.3s ease; }
  .copyright a:hover { color: #ccc !important; }
  </style>
</head>
<body>

  <!-- Cyberpunk Loading Screen -->
  <div id="cyber-loading">
    <div class="loading-text">LOADING</div>
    <div class="loading-bar-container">
      <div class="loading-bar" id="loadingBar"></div>
    </div>
  </div>

  <!-- Main Content (Hidden Initially) -->
  <div class="main-content">
    <nav class="navbar navbar-expand-lg navbar-custom">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">DSET</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
            <li class="nav-item locked" id="course-nav-item"><a class="nav-link" href="course.html">Course</a></li>
            
            <li class="nav-item" id="quiz-nav-item"><a class="nav-link active" href="quiz.html">Quiz</a></li>
            <li class="nav-item locked" id="resources-nav-item"><a class="nav-link" href="resources.html">Resources</a></li>
            <li class="nav-item" id="login-nav-item">
              <a class="nav-link" href="#" id="login-btn">Login</a>
            </li>
            <li class="nav-item" id="user-nav-item" style="display:none;">
              <div class="user-display">
                <span class="username-display" id="username-nav-display"></span>
                <button id="logout-btn" class="btn-logout">LOGOUT</button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="quiz-container">
      <div class="quiz-header">
        <h1>CYBER SECURITY QUIZZES</h1>
        <p>Test your knowledge and skills with our interactive cybersecurity challenges. Select a quiz below to begin your assessment.</p>
      </div>

      <!-- In your quiz-container div, replace the entire quiz-grid section with this: -->
<div class="quiz-grid">
  <!-- Module 1 Quiz -->
  <div class="quiz-card" id="quiz-1" data-quiz-id="1">
    <div class="quiz-status status-unlocked">UNLOCKED</div>
    <h2>Module 1: Cybersecurity Fundamentals</h2>
    <div class="quiz-meta">
      <span>12 Questions</span>
      <span class="quiz-difficulty difficulty-beginner">BEGINNER</span>
    </div>
    <p>Passwords, public WiFi, phishing, digital footprints, malware, social engineering, safe apps, and more.</p>
    <a href="Quiz/quiz1.html" class="btn-quiz">START QUIZ</a>
  </div>

  <!-- Module 2 Quiz -->
  <div class="quiz-card locked" id="quiz-2" data-quiz-id="2">
    <div class="quiz-status status-locked">LOCKED</div>
    <div class="lock-icon">🔒</div>
    <h2>Module 2: Cyber Attack</h2>
    <div class="quiz-meta">
      <span>12 Questions</span>
      <span class="quiz-difficulty difficulty-intermediate">INTERMEDIATE</span>
    </div>
    <p>Hacker mindset, password cracking speed, disguised malware, OSINT, Trojans, ransomware, DDoS, insider threats.</p>
    <a href="Quiz/quiz2.html" class="btn-quiz">START QUIZ</a>
  </div>

  <!-- Module 3 Quiz -->
  <div class="quiz-card locked" id="quiz-3" data-quiz-id="3">
    <div class="quiz-status status-locked">LOCKED</div>
    <div class="lock-icon">🔒</div>
    <h2>Module 3: Cyber Defense</h2>
    <div class="quiz-meta">
      <span>12 Questions</span>
      <span class="quiz-difficulty difficulty-intermediate">INTERMEDIATE</span>
    </div>
    <p>MFA, firewalls, backups, encryption, VPNs, patching, password strategy, physical security, AI, awareness.</p>
    <a href="Quiz/quiz3.html" class="btn-quiz">START QUIZ</a>
  </div>

  <!-- Module 4 Quiz -->
  <div class="quiz-card locked" id="quiz-4" data-quiz-id="4">
    <div class="quiz-status status-locked">LOCKED</div>
    <div class="lock-icon">🔒</div>
    <h2>Module 4: Cybersecurity in Action</h2>
    <div class="quiz-meta">
      <span>10 Questions</span>
      <span class="quiz-difficulty difficulty-advanced">ADVANCED</span>
    </div>
    <p>Case studies, ransomware, insider threats, social media risks, real-world impacts, careers, and human factors.</p>
    <a href="Quiz/quiz4.html" class="btn-quiz">START QUIZ</a>
  </div>

  
  <!-- Certification Exam -->
  <div class="quiz-card locked" id="quiz-5" data-quiz-id="5">
    <div class="quiz-status status-locked">LOCKED</div>
    <div class="lock-icon">🔒</div>
    <h2>Certification Exam</h2>
    <div class="quiz-meta">
      <span>30 Questions</span>
      <span class="quiz-difficulty difficulty-expert">EXPERT</span>
    </div>
    <p>Final assessment covering all modules. Pass to generate your certificate.</p>
    <a href="Quiz/quiz6.html" class="btn-quiz">START QUIZ</a>
  </div>
</div>

<!-- Add this progress indicator right before the closing </div> of quiz-container -->
<div class="progress-indicator">
  <h3>CYBER PROGRESS</h3>
  <div>Level <span id="current-level">1</span> of <span id="total-levels">5</span></div>
  <div>Quizzes Completed: <span id="completed-count">0</span>/<span id="total-quizzes">5</span></div>
  <div class="progress-bar">
    <div class="progress-fill" id="progress-fill"></div>
  </div>
</div>

    <!-- Matrix Background -->
    <div class="matrix-container" id="matrixContainer"></div>
  </div>

  <!-- Guide Bot -->
  <div id="cyber-guide">
    <div class="guide-character">
      <div class="guide-body">
        <div class="guide-face">
          <div class="guide-eyes">
            <div class="guide-eye left"></div>
            <div class="guide-eye right"></div>
          </div>
          <div class="guide-mouth"></div>
        </div>
        <div class="guide-panel"></div>
      </div>
    </div>
    <div class="speech-bubble">
      <div id="guide-message">> Welcome to DSET Cyber Module.</div>
      <div class="guide-controls">
        <button class="guide-btn" id="next-btn">Next</button>
        <button class="guide-btn" id="faq-btn">FAQ</button>
        <button class="guide-btn" id="chat-btn">Chat</button>
      </div>
    </div>
    
    <div class="faq-container" id="faq-container">
      <div class="faq-item" data-question="How do I get my certificate?">How do I get my certificate?</div>
      <div class="faq-item" data-question="What's the quiz structure?">What's the quiz structure?</div>
      <div class="faq-item" data-question="Where are the courses?">Where are the courses?</div>
      <div class="faq-item" data-question="How many attempts do I get?">How many attempts do I get?</div>
    </div>
    
    <div class="input-container" id="input-container">
      <input type="text" id="user-input" placeholder="Type 'help' for tutorial...">
    </div>
  </div>

  <!-- Login Popup -->
  <div id="login-popup" class="cyber-popup">
    <div class="cyber-popup-content">
      <span class="close-btn">&times;</span>
      <h2>ACCESS TERMINAL</h2>
      <form id="login-form">
        <input type="text" id="login-id" placeholder="ID (e.g., STU101)" required>
        <input type="text" id="login-mobile" placeholder="Mobile (e.g., 01712345678)" required>
        <button type="submit" class="btn-cyber">AUTHENTICATE</button>
      </form>
    </div>
  </div>

  <!-- Alert System -->
  <div class="alert-overlay" id="alert-overlay"></div>
  <div class="cyber-alert" id="cyber-alert">
    <h3 id="alert-title">ALERT</h3>
    <p id="alert-message">Message goes here</p>
    <div id="alert-buttons">
      <button class="cyber-alert-btn confirm" id="alert-confirm">Confirm</button>
      <button class="cyber-alert-btn danger" id="alert-cancel">Cancel</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Excel-based login system integration (shared)
    let userDatabase = [];
    const appState = { currentUser: null };
    window.appState = appState;

    const elements = {
      loginBtn: document.getElementById("login-btn"),
      logoutBtn: document.getElementById("logout-btn"),
      loginPopup: document.getElementById("login-popup"),
      closeBtn: document.querySelector(".close-btn"),
      loginForm: document.getElementById("login-form"),
      loginId: document.getElementById("login-id"),
      loginMobile: document.getElementById("login-mobile"),
      userNavItem: document.getElementById("user-nav-item"),
      usernameDisplay: document.getElementById("username-nav-display"),
      loginNavItem: document.getElementById("login-nav-item"),
      alertOverlay: document.getElementById("alert-overlay"),
      cyberAlert: document.getElementById("cyber-alert"),
      alertTitle: document.getElementById("alert-title"),
      alertMessage: document.getElementById("alert-message"),
      alertConfirm: document.getElementById("alert-confirm"),
      alertCancel: document.getElementById("alert-cancel"),
      courseNavItem: document.getElementById("course-nav-item"),
      quizNavItem: document.getElementById("quiz-nav-item"),
      resourcesNavItem: document.getElementById("resources-nav-item")
    };

    function showAlert(title, message, options = {}) {
      elements.alertTitle.textContent = title;
      elements.alertMessage.textContent = message;
      if (options.confirm) {
        elements.alertConfirm.style.display = 'inline-block';
        elements.alertConfirm.textContent = options.confirmText || 'Confirm';
        elements.alertConfirm.onclick = () => {
          hideAlert();
          if (options.onConfirm) options.onConfirm();
        };
      } else {
        elements.alertConfirm.style.display = 'none';
      }
      if (options.cancel) {
        elements.alertCancel.style.display = 'inline-block';
        elements.alertCancel.textContent = options.cancelText || 'Cancel';
        elements.alertCancel.onclick = () => {
          hideAlert();
          if (options.onCancel) options.onCancel();
        };
      } else {
        elements.alertCancel.style.display = 'none';
      }
      elements.alertOverlay.classList.add('active');
      elements.cyberAlert.classList.add('active');
    }

    function hideAlert() {
      elements.alertOverlay.classList.remove('active');
      elements.cyberAlert.classList.remove('active');
    }

    function checkLoggedInUser() {
      const sessionUser = sessionStorage.getItem('currentUser');
      if (sessionUser) { try { loginUser(JSON.parse(sessionUser), true); return; } catch(e) { sessionStorage.removeItem('currentUser'); } }
      const savedUser = localStorage.getItem('loggedInUser');
      if (savedUser) { try { loginUser(JSON.parse(savedUser), true); } catch(e) { localStorage.removeItem('loggedInUser'); } }
    }

    function loginUser(user, isAutoLogin = false) {
      appState.currentUser = user;
      localStorage.setItem('loggedInUser', JSON.stringify(user));
      sessionStorage.setItem('currentUser', JSON.stringify(user));
      if (elements.userNavItem) elements.userNavItem.style.display = "block";
      if (elements.loginNavItem) elements.loginNavItem.style.display = "none";
      if (elements.usernameDisplay) elements.usernameDisplay.textContent = user.Name;
      if (elements.loginPopup) elements.loginPopup.style.display = "none";
      [elements.courseNavItem, elements.quizNavItem, elements.resourcesNavItem].forEach(el => { if (el) el.classList.remove('locked'); });
      if (typeof loadProgress === 'function' && typeof renderQuizCards === 'function' && typeof updateProgressIndicator === 'function') {
        loadProgress();
        renderQuizCards();
        updateProgressIndicator();
      }
      if (!isAutoLogin || !sessionStorage.getItem('hasShownWelcome')) {
        setTimeout(() => showAlert("ACCESS GRANTED", `Welcome back, ${user.Name}!`, { confirm: true }), 800);
      }
      sessionStorage.setItem('hasShownWelcome', 'true');
    }

    function logoutUser() {
      showAlert(
        "CONFIRM LOGOUT",
        "Are you sure you want to log out?",
        {
          confirm: true,
          confirmText: "LOGOUT",
          onConfirm: () => {
            localStorage.removeItem('loggedInUser');
            sessionStorage.removeItem('currentUser');
            appState.currentUser = null;
            if (elements.userNavItem) elements.userNavItem.style.display = "none";
            if (elements.loginNavItem) elements.loginNavItem.style.display = "block";
            [elements.courseNavItem, elements.quizNavItem, elements.resourcesNavItem].forEach(el => { if (el) el.classList.add('locked'); });
            window.location.href = 'index.html';
          },
          cancel: true
        }
      );
    }

    async function loadUsersFromExcel() {
      try {
        const response = await fetch('./users.xlsx');
        if (!response.ok) throw new Error(`Failed to fetch Excel file: HTTP ${response.status}`);
        const arrayBuffer = await response.arrayBuffer();
        const data = new Uint8Array(arrayBuffer);
        const workbook = XLSX.read(data, { type: 'array' });
        const worksheet = workbook.Sheets[workbook.SheetNames[0]];
        const excelData = XLSX.utils.sheet_to_json(worksheet);
        userDatabase = excelData.map(row => ({
          ID: String(row.ID || '').trim(),
          Name: String(row.Name || '').trim(),
          Mobile: String(row.Mobile || '').trim(),
          Role: String(row.Role || 'student').trim()
        })).filter(user => user.ID && user.Name && user.Mobile);
      } catch (error) {
        console.error('Error loading Excel:', error);
        userDatabase = [
          { ID: "STU101", Name: "Test Student", Mobile: "01712345678", Role: "student" },
          { ID: "TEACH202", Name: "Test Teacher", Mobile: "01876543210", Role: "teacher" }
        ];
        showAlert("NOTE", "Using test data - Login with ID: STU101, Mobile: 01712345678", { confirm: true });
      }
    }

    function normalizeMobile(mobile) {
      let digits = mobile.replace(/\D/g, '');
      if (digits.startsWith('880')) digits = digits.substring(3);
      else if (digits.startsWith('+880')) digits = digits.substring(4);
      if (digits.length !== 11) throw new Error('Mobile must be exactly 11 digits');
      return digits;
    }

    function validateUser(id, mobile) {
      try {
        const normalizedMobile = normalizeMobile(mobile);
        const user = userDatabase.find(u => u.ID === id.trim() && normalizeMobile(u.Mobile) === normalizedMobile);
        if (!user) throw new Error('No matching user found');
        return user;
      } catch (error) {
        console.error('Validation error:', error);
        return null;
      }
    }

    function setupLoginEventListeners() {
      if (elements.loginBtn) elements.loginBtn.addEventListener("click", () => { elements.loginPopup.style.display = "block"; elements.loginId && elements.loginId.focus(); });
      if (elements.closeBtn) elements.closeBtn.addEventListener("click", () => { elements.loginPopup.style.display = "none"; });
      if (elements.loginMobile) elements.loginMobile.addEventListener('input', function() { this.value = this.value.replace(/\D/g, ''); });
      if (elements.loginForm) elements.loginForm.addEventListener("submit", function(e) {
        e.preventDefault();
        const id = elements.loginId.value;
        const mobile = elements.loginMobile.value;
        if (!id || !mobile) { showAlert("ERROR", "Both ID and Mobile are required", { confirm: true }); return; }
        const user = validateUser(id, mobile);
        if (user) { loginUser(user); } else { showAlert("ACCESS DENIED", "Invalid ID or Mobile. Must be exact 11-digit number.", { confirm: true }); }
      });
      if (elements.logoutBtn) elements.logoutBtn.addEventListener("click", logoutUser);

      document.querySelectorAll('.nav-item.locked .nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
          if (!appState.currentUser) {
            e.preventDefault();
            showAlert(
              "LOGIN REQUIRED",
              "Please login to access this section.",
              { confirm: true, confirmText: "LOGIN", onConfirm: () => { elements.loginPopup.style.display = "block"; } }
            );
          }
        });
      });

      window.addEventListener("click", (e) => {
        if (e.target === elements.loginPopup) elements.loginPopup.style.display = "none";
        if (e.target === elements.alertOverlay) hideAlert();
      });
    }

    (async function initializeLogin() {
      try {
        await loadUsersFromExcel();
        setupLoginEventListeners();
        checkLoggedInUser();
        window.addEventListener('beforeunload', () => {
          if (!sessionStorage.getItem('currentUser')) {
            sessionStorage.removeItem('hasShownWelcome');
          }
        });
      } catch (error) {
        console.error('Initialization error:', error);
        showAlert("INIT ERROR", "Failed to initialize login: " + error.message, { confirm: true, confirmText: "RELOAD", onConfirm: () => window.location.reload() });
      }
    })();
  </script>
<script>
  // ===== QUIZ PROGRESSION SYSTEM =====
  const quizData = [
    { id: 1, title: "Module 1: Cybersecurity Fundamentals", unlocked: true, completed: false },
    { id: 2, title: "Module 2: Cyber Attack", unlocked: false, completed: false },
    { id: 3, title: "Module 3: Cyber Defense", unlocked: false, completed: false },
    { id: 4, title: "Module 4: Cybersecurity in Action", unlocked: false, completed: false },
        { id: 5, title: "Certification Exam", unlocked: false, completed: false }
  ];

  // Per-user progress helpers
  let currentProgress = { maxUnlocked: 1, completed: {}, current: null };

  function getProgressKey() {
    if (window.appState && appState.currentUser && appState.currentUser.ID) {
      return `quizProgress:v1:${appState.currentUser.ID}`;
    }
    return null;
  }

  function legacyProgressToCurrent() {
    try {
      const saved = localStorage.getItem('cyberQuizProgress');
      if (!saved) return null;
      const arr = JSON.parse(saved);
      let maxUnlocked = 1;
      const completed = {};
      arr.forEach(q => {
        if (q.unlocked && q.id > maxUnlocked) maxUnlocked = q.id;
        if (q.completed) completed[q.id] = true;
      });
      return { maxUnlocked, completed };
    } catch (e) {
      return null;
    }
  }

  function applyProgressToQuizData() {
    quizData.forEach(q => {
      q.completed = !!currentProgress.completed[q.id];
      q.unlocked = q.id <= (currentProgress.maxUnlocked || 1);
    });
  }

  function loadUserProgress() {
    const key = getProgressKey();
    if (key) {
      const raw = localStorage.getItem(key);
      if (raw) {
        try { currentProgress = JSON.parse(raw); } catch { currentProgress = { maxUnlocked: 1, completed: {}, current: null }; }
      } else {
        const legacy = legacyProgressToCurrent();
        if (legacy) currentProgress = { ...legacy, current: null };
      }
    } else {
      const legacy = legacyProgressToCurrent();
      currentProgress = legacy ? { ...legacy, current: null } : { maxUnlocked: 1, completed: {}, current: null };
    }
    if (!currentProgress || typeof currentProgress.maxUnlocked !== 'number') {
      currentProgress = { maxUnlocked: 1, completed: {}, current: null };
    }
    if (typeof currentProgress.current !== 'number' || !currentProgress.current) {
      const maxCompleted = Object.keys(currentProgress.completed || {}).map(n => parseInt(n,10)).reduce((a,b)=>Math.max(a,b), 0);
      if (currentProgress.maxUnlocked && !currentProgress.completed[currentProgress.maxUnlocked]) {
        currentProgress.current = currentProgress.maxUnlocked;
      } else {
        currentProgress.current = Math.min((maxCompleted || 0) + 1, quizData.length);
      }
    }
    applyProgressToQuizData();
  }

  function saveUserProgress() {
    const key = getProgressKey();
    if (key) {
      localStorage.setItem(key, JSON.stringify(currentProgress));
    } else {
      // fallback legacy format
      const legacyArr = quizData.map(q => ({ id: q.id, unlocked: q.id <= currentProgress.maxUnlocked, completed: !!currentProgress.completed[q.id] }));
      localStorage.setItem('cyberQuizProgress', JSON.stringify(legacyArr));
    }
  }

  // Handle coming back from a quiz page by parsing referrer
  function handleReferrerCompletion() {
    try {
      if (!(window.appState && window.appState.currentUser)) return;

      let completedId = null;

      // Prefer explicit completion marker set by quiz pages
      const marker = sessionStorage.getItem('quizCompletedId') || localStorage.getItem('quizCompletedId');
      if (marker && /^\d+$/.test(marker)) {
        completedId = parseInt(marker, 10);
        sessionStorage.removeItem('quizCompletedId');
        localStorage.removeItem('quizCompletedId');
      } else {
        // Check URL params e.g., ?completed=1 or ?quizCompleted=1 or ?quiz=1
        const params = new URLSearchParams(window.location.search);
        const qp = params.get('quizCompleted') || params.get('completed') || params.get('quiz');
        if (qp && /^\d+$/.test(qp)) {
          completedId = parseInt(qp, 10);
        }
      }

      if (!completedId) {
        return;
      }

      if (!currentProgress.completed) currentProgress.completed = {};

      const maxCompleted = Object.keys(currentProgress.completed || {}).map(n => parseInt(n, 10)).reduce((a, b) => Math.max(a, b), 0) || 0;
      const expectedNext = Math.min(maxCompleted + 1, quizData.length);

      if (completedId === expectedNext || completedId === currentProgress.current) {
        currentProgress.completed[completedId] = true;
        const nextId = Math.min(completedId + 1, quizData.length);
        currentProgress.maxUnlocked = Math.max(currentProgress.maxUnlocked || 1, nextId);
        currentProgress.current = nextId;
        saveUserProgress();
        applyProgressToQuizData();
      }
    } catch (e) {
      console.error('Referrer handling error:', e);
    }
  }

  // ===== LOADING SCREEN FUNCTIONALITY =====
  document.addEventListener('DOMContentLoaded', function() {
    const loadingScreen = document.getElementById('cyber-loading');
    const loadingBar = document.getElementById('loadingBar');
    const mainContent = document.querySelector('.main-content');
    // Ensure footer is accessible even if later steps fail
    const footerEl = document.querySelector('.cyber-footer');
    if (footerEl) footerEl.classList.add('ready');
    
    let progress = 0;
    
    function updateProgress() {
      progress += Math.random() * 3 + 1;
      if (progress > 100) progress = 100;
      
      loadingBar.style.width = `${progress}%`;
      
      if (progress < 100) {
        setTimeout(updateProgress, 30 + Math.random() * 50);
      } else {
        loadingBar.style.boxShadow = '0 0 25px rgba(0, 242, 255, 0.9)';
        
        setTimeout(() => {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            mainContent.style.display = 'block';
            const footer = document.querySelector('.cyber-footer');
            if (footer) footer.classList.add('ready');
            initializePageContent();
          }, 500);
        }, 300);
      }
    }
    
    setTimeout(updateProgress, 300);
  });

  // ===== MAIN PAGE INITIALIZATION =====
  function initializePageContent() {
    // Initialize quiz system
    initQuizSystem();
    
    // Set up navigation
    setupNavigation();
    
    // Initialize matrix background
    initMatrixBackground();
  }

  // ===== QUIZ SYSTEM FUNCTIONS =====
  function initQuizSystem() {
    loadProgress();
    handleReferrerCompletion();
    renderQuizCards();
    setupQuizEventListeners();
    updateProgressIndicator();
  }

  function loadProgress() {
    loadUserProgress();
  }

  function saveProgress() {
    saveUserProgress();
  }

  function renderQuizCards() {
    quizData.forEach(quiz => {
      const card = document.getElementById(`quiz-${quiz.id}`);
      if (!card) return;

      const accessible = quiz.id <= (currentProgress.maxUnlocked || 1);

      if (accessible) {
        card.classList.remove('locked');
        const lockIcon = card.querySelector('.lock-icon');
        if (lockIcon) lockIcon.remove();
        const status = card.querySelector('.quiz-status');
        if (status) {
          status.textContent = 'UNLOCKED';
          status.classList.remove('status-locked');
          status.classList.add('status-unlocked');
        }
      } else {
        if (!card.classList.contains('locked')) card.classList.add('locked');
        if (!card.querySelector('.lock-icon')) {
          const lock = document.createElement('div');
          lock.className = 'lock-icon';
          lock.textContent = '🔒';
          card.appendChild(lock);
        }
        const status = card.querySelector('.quiz-status');
        if (status) {
          status.textContent = 'LOCKED';
          status.classList.remove('status-unlocked');
          status.classList.add('status-locked');
        }
      }

      // Completion badge
      const existingBadge = card.querySelector('.completed-badge');
      if (quiz.completed) {
        if (!existingBadge) {
          const badge = document.createElement('div');
          badge.className = 'completed-badge';
          badge.textContent = 'COMPLETED';
          card.appendChild(badge);
        }
      } else if (existingBadge) {
        existingBadge.remove();
      }
    });
  }

  function setupQuizEventListeners() {
    // Button clicks
    document.querySelectorAll('.quiz-card .btn-quiz').forEach(btn => {
      btn.addEventListener('click', function(e) {
        const card = this.closest('.quiz-card');
        const quizId = parseInt(card.dataset.quizId, 10);
        if (card.classList.contains('locked')) {
          e.preventDefault();
          if (typeof showAlert === 'function') {
            showAlert("LOCKED", "Complete the previous quiz first.", { confirm: true });
          }
          return;
        }
        if (!(window.appState && window.appState.currentUser)) {
          e.preventDefault();
          if (typeof showAlert === 'function') {
            showAlert(
              "LOGIN REQUIRED",
              "Please login to start quizzes.",
              { confirm: true, confirmText: "LOGIN", onConfirm: () => { if (window.elements && elements.loginPopup) elements.loginPopup.style.display = 'block'; } }
            );
          } else {
            alert('Please login to start quizzes.');
          }
          return;
        }
        // Set current running quiz
        currentProgress.current = quizId;
        saveUserProgress();
      });
    });

    // Card clicks on locked ones should show popup too
    document.querySelectorAll('.quiz-card').forEach(card => {
      card.addEventListener('click', function(e) {
        if (card.classList.contains('locked')) {
          e.preventDefault();
          if (typeof showAlert === 'function') {
            showAlert("LOCKED", "Complete the previous quiz first.", { confirm: true });
          }
        }
      });
    });
  }

  function markQuizComplete(quizId) {
    const quiz = quizData.find(q => q.id === quizId);
    if (!quiz) return;

    // Update in-memory flags
    quiz.completed = true;

    // Update persistent progress
    if (!currentProgress.completed) currentProgress.completed = {};
    currentProgress.completed[quizId] = true;

    // Advance unlocked level and current pointer
    const nextId = Math.min(quizId + 1, quizData.length);
    currentProgress.maxUnlocked = Math.max(currentProgress.maxUnlocked || 1, nextId);
    currentProgress.current = nextId;

    // Persist and re-render
    saveUserProgress();
    applyProgressToQuizData();
    renderQuizCards();
    updateProgressIndicator();

    // Visual feedback
    const card = document.getElementById(`quiz-${quizId}`);
    if (card) {
      card.classList.add('unlocking');
      setTimeout(() => card.classList.remove('unlocking'), 1000);
    }
  }

  function updateProgressIndicator() {
    const total = quizData.length;
    const completedCount = Object.keys(currentProgress.completed || {}).length;
    const progress = Math.round((completedCount / total) * 100);

    document.getElementById('current-level').textContent = currentProgress.maxUnlocked;
    document.getElementById('total-levels').textContent = total;
    document.getElementById('completed-count').textContent = completedCount;
    document.getElementById('total-quizzes').textContent = total;
    document.getElementById('progress-fill').style.width = `${progress}%`;
  }

  // ===== NAVIGATION =====
  function setupNavigation() {
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        navLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
      });
    });
  }

  // ===== MATRIX BACKGROUND =====
  function initMatrixBackground() {
  const container = document.getElementById("matrixContainer");
  const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%^&*";
  
  const canvas = document.createElement('canvas');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  container.appendChild(canvas);
  
  const ctx = canvas.getContext('2d');
  const fontSize = 18;
  const drops = [];
  
  // Initialize drops
  for (let i = 0; i < Math.floor(canvas.width / fontSize); i++) {
    drops[i] = {
      y: Math.random() * -canvas.height,
      speed: 2 + Math.random() * 5,
      length: 10 + Math.floor(Math.random() * 20),
      lastChar: 0
    };
  }
  
  function draw() {
    // Dark translucent background for trail effect
    ctx.fillStyle = 'rgba(10, 14, 26, 0.05)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.font = `${fontSize}px 'Fira Code', monospace`;
    
    for (let i = 0; i < drops.length; i++) {
      const text = chars.charAt(Math.floor(Math.random() * chars.length));
      
      // Bright head character
      ctx.fillStyle = 'rgba(0, 255, 136, 0.8)';
      ctx.fillText(text, i * fontSize, drops[i].y);
      
      // Dim trail characters
      ctx.fillStyle = 'rgba(0, 255, 136, 0.15)';
      for (let j = 1; j < drops[i].length; j++) {
        const trailY = drops[i].y - j * fontSize;
        if (trailY > 0) {
          const trailChar = chars.charAt(Math.floor(Math.random() * chars.length));
          ctx.fillText(trailChar, i * fontSize, trailY);
        }
      }
      
      // Reset drop when it reaches bottom
      if (drops[i].y > canvas.height) {
        drops[i].y = Math.random() * -100;
      }
      
      drops[i].y += drops[i].speed;
    }
    
    requestAnimationFrame(draw);
  }
  
  draw();
  
  window.addEventListener('resize', function() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
}

  // Debug helper (remove in production)
  document.addEventListener('keydown', (e) => {
    if (e.ctrlKey && e.key === 'd') {
      quizData.forEach(q => {
        q.unlocked = true;
        q.completed = true;
      });
      saveProgress();
      renderQuizCards();
      updateProgressIndicator();
    }
  });
</script>

<!-- Guide Bot Script (from course) -->
<script>
// ===== GUIDE MESSAGES =====
const guideMessages = {
  welcome: [
    {text: "> Welcome to our platform.", focus: null},
    {text: "> I'm your interactive guide.", focus: null},
    {text: "> Let me walk you through...", focus: null}
  ],
  general: [
    "> How can I assist you today?",
    "> Need help with something?",
    "> Type 'help' for guidance.",
    "> Click FAQ for common questions."
  ],
  faq: {
    "How do I get my certificate?": "> Complete all courses → Pass quizzes → Download certificate!",
    "What's the quiz structure?": "> Topic quizzes → Final exam → Certificate on passing",
    "Where are the courses?": "> Check the Courses section in navigation",
    "How many attempts do I get?": "> Unlimited attempts for learning!"
  },
  tutorial: [
    {text: "> Let's explore the quizzes.", focus: null},
    {text: "> Quizzes unlock sequentially.", focus: null},
    {text: "> Start with Quiz 1.", focus: null},
    {text: "> Your progress is saved per account.", focus: null},
    {text: "> Come back anytime — unlocked quizzes remain accessible.", focus: null}
  ]
};

// ===== DOM ELEMENTS =====
const guideElement = document.getElementById('cyber-guide');
const messageElement = document.getElementById('guide-message');
const nextButton = document.getElementById('next-btn');
const faqButton = document.getElementById('faq-btn');
const chatButton = document.getElementById('chat-btn');
const speechBubble = document.querySelector('.speech-bubble');
const faqContainer = document.getElementById('faq-container');
const inputContainer = document.getElementById('input-container');
const userInput = document.getElementById('user-input');
const faqItems = document.querySelectorAll('.faq-item');

let currentTutorialIndex = 0;
let isTutorialActive = false;

function showMessage(message) {
  messageElement.innerHTML = message.replace(/\n/g, '<br>');
  speechBubble.classList.add('active');
}

function startTutorial() {
  isTutorialActive = true;
  currentTutorialIndex = 0;
  showNextTutorialMessage();
}

function showNextTutorialMessage() {
  if (currentTutorialIndex < guideMessages.tutorial.length) {
    const message = guideMessages.tutorial[currentTutorialIndex];
    showMessage(message.text);
    currentTutorialIndex++;
  } else {
    isTutorialActive = false;
    showMessage("> Tutorial complete. Type 'help' to see it again.");
  }
}

function startGuide() {
  guideElement.classList.add('active');
  showMessage("> System initialized. How can I help?");

  document.querySelector('.guide-character').onclick = () => {
    const randomMsg = guideMessages.general[
      Math.floor(Math.random() * guideMessages.general.length)
    ];
    showMessage(randomMsg);
  };

  nextButton.onclick = () => {
    if (isTutorialActive) {
      showNextTutorialMessage();
    } else {
      showMessage("> Type 'help' to start the tutorial.");
    }
  };

  faqButton.onclick = () => {
    faqContainer.classList.toggle('active');
    inputContainer.classList.remove('active');
    if (faqContainer.classList.contains('active')) {
      showMessage("> Select a question from the FAQ.");
    }
  };

  chatButton.onclick = () => {
    inputContainer.classList.toggle('active');
    faqContainer.classList.remove('active');
    if (inputContainer.classList.contains('active')) {
      userInput.focus();
      showMessage("> Type your question or 'help' for tutorial.");
    }
  };

  faqItems.forEach(item => {
    item.onclick = () => {
      const question = item.getAttribute('data-question');
      showMessage(guideMessages.faq[question]);
      faqContainer.classList.remove('active');
    };
  });

  userInput.onkeypress = (e) => {
    if (e.key === 'Enter') {
      const text = userInput.value.toLowerCase();
      if (text.includes('help')) {
        startTutorial();
      } else {
        const randomMsg = guideMessages.general[
          Math.floor(Math.random() * guideMessages.general.length)
        ];
        showMessage(randomMsg);
      }
      userInput.value = '';
      inputContainer.classList.remove('active');
    }
  };
}

window.addEventListener('load', startGuide);
</script>
<!-- Footer -->
   <footer class="cyber-footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 mb-5 mb-lg-0">
          <div class="footer-about">
            <div class="footer-logo">DSET</div>
            <p>DSET is a premier cyber security training platform dedicated to equipping individuals with the skills needed to defend against digital threats in our interconnected world.</p>
            <p>> SECURE • EDUCATE • INNOVATE</p>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 mb-5 mb-md-0">
          <div class="footer-links">
            <h3>LINKS</h3>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About Us</a></li>
              <li><a href="course.html">Courses</a></li>
              <li><a href="quiz.html">Quiz</a></li>
              <li><a href="resources.html">Resources</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 mb-5 mb-md-0">
          <div class="footer-links">
            <h3>COURSES</h3>
            <ul>
              <li><a href="#">Fundamentals</a></li>
              <li><a href="#">Cyber Attack</a></li>
              <li><a href="#">Cyber Defense</a></li>
              <li><a href="#">Cybersecurity in Action</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="footer-social">
            <h3>CONNECT WITH US</h3>
            <div class="social-icons">
              <a href="https://discord.gg/example" class="social-icon discord" target="_blank">
                <i class="fab fa-discord"></i>
              </a>
              <a href="https://facebook.com/example" class="social-icon facebook" target="_blank">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-twitter"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-github"></i>
              </a>
            </div>
            <p class="mt-4">Join our community of cyber security professionals and enthusiasts.</p>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2025 DSET CYBER SECURITY TRAINING. ALL RIGHTS RESERVED. | <a href="#">PRIVACY POLICY</a> | <a href="#">TERMS OF SERVICE</a> | Made by <a href="https://www.facebook.com/ishan.das.770995">Ishan Das</a> and <a href="https://www.facebook.com/overpower.gaming.94">Sidratul Rahman Safwan</a></p>
      </div>
    </div>
  </footer>

</body>
</html>